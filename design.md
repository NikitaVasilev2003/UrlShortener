# Design Document

## Идея
Создание функциональности VIP ссылок, которая позволяет пользователям создавать короткие ссылки с заданными ключами и временем жизни. Эта функция будет полезна для создания персонализированных и временных URL.

## Продуктовые гипотезы
1. Если пользователи смогут создавать VIP ссылки с кастомными ключами, то это увеличит количество повторных посещений сайта, потому что пользователи будут чаще использовать VIP ссылки для персонализированных коротких URL.
2. Если будет добавлена возможность установки времени жизни ссылки, то это повысит безопасность и актуальность ссылок, потому что пользователи смогут контролировать срок действия своих ссылок.

## Оценка трудозатрат
Полноценная реализация функциональности VIP ссылок на бэкенде потребует:
- Создание новой модели `VIPLink` для хранения данных о VIP ссылках.
- Добавление новых методов в существующие классы для обработки VIP ссылок.
- Реализация эндпоинтов для создания, обновления и удаления VIP ссылок.
- Обновление существующих тестов и написание новых для покрытия новой функциональности.

Примерные трудозатраты:
- Разработка модели данных: 4 часа
- Разработка API эндпоинтов: 6 часов
- Интеграция с существующей системой: 4 часа
- Написание тестов: 4 часа
- Отладка и тестирование: 2 часа

Итого: 20 часов

## MVP
Для MVP можно реализовать следующие функции:
- Создание VIP ссылки с кастомным ключом.
- Установка времени жизни ссылки.

MVP будет включать минимальный набор функций для проверки гипотез. Реализация MVP займет примерно 10 часов:
- Создание модели данных: 2 часа
- Разработка базовых API эндпоинтов: 4 часа
- Написание базовых тестов: 2 часа
- Отладка и тестирование: 2 часа

## Архитектура
### Компонентная диаграмма
(вставьте диаграмму здесь)

### Описание архитектуры
Архитектура включает следующие компоненты:
- Модель `VIPLink` для хранения данных о VIP ссылках, включая ключ, URL, секретный ключ, время жизни и дату создания.
- API эндпоинты для управления VIP ссылками, включая создание, получение, обновление и удаление.
- Логика проверки времени жизни ссылок при доступе к ним.
- Обновления в существующих моделях и эндпоинтах для поддержки новой функциональности.

### Диаграммы
(вставьте здесь диаграммы классов, компонентные диаграммы, диаграммы последовательности UML и т.д.)

## Реализация
Полная реализация идеи включает:
- Модель данных `VIPLink`.
- API эндпоинты для управления VIP ссылками.
- Логика обработки времени жизни и кастомных ключей.
- Обновления существующих моделей и эндпоинтов для интеграции новой функциональности.
- Написание тестов для новой функциональности.

## Автотестирование
Все предоставленные в исходном репозитории тесты на VIP ссылки проходят успешно. Были внесены необходимые правки в код сервиса для обеспечения корректной работы тестов:
- Тесты на создание VIP ссылок.
- Тесты на установку времени жизни.
- Тесты на проверку существования и удаления ссылок.

## АБ-тест
### Выборки пользователей
1. Контрольная группа: пользователи, не использующие VIP ссылки.
2. Экспериментальная группа: пользователи, использующие VIP ссылки.

### Проверяемые параметры
1. Частота использования коротких ссылок.
2. Количество повторных посещений сайта.

## Продуктовые метрики
### Набор метрик
1. Количество созданных VIP ссылок.
2. Частота использования VIP ссылок.
3. Количество повторных посещений сайта.
4. Среднее время жизни ссылок.

### Ожидаемые значения метрик
1. Увеличение количества созданных VIP ссылок на 20%.
2. Повышение частоты использования VIP ссылок на 15%.
3. Увеличение количества повторных посещений сайта на 10%.
4. Среднее время жизни ссылок соответствует ожиданиям пользователей (например, 7 дней для временных ссылок).


